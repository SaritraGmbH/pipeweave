# ============================================================================
# PipeWeave Environment Variables
# ============================================================================
# Copy this file to .env and fill in your values

# ============================================================================
# Database (Required for Orchestrator)
# ============================================================================
DATABASE_URL=postgres://user:password@localhost:5432/pipeweave

# ============================================================================
# S3 / MinIO Storage (Required for Orchestrator & Workers)
# ============================================================================
S3_ENDPOINT=http://localhost:9000
S3_BUCKET=pipeweave
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_REGION=us-east-1

# ============================================================================
# Security (Required - must match on Orchestrator and all Workers)
# ============================================================================
# Generate with: openssl rand -hex 32
PIPEWEAVE_SECRET_KEY=your-32-byte-secret-key-here

# ============================================================================
# Orchestrator Configuration
# ============================================================================
# Mode: 'standalone' (with polling) or 'serverless' (triggered by scheduler)
MODE=standalone

# Maximum concurrent task executions
MAX_CONCURRENCY=10

# Polling interval in ms (standalone mode only)
POLL_INTERVAL_MS=1000

# Dead Letter Queue retention in days
DLQ_RETENTION_DAYS=30

# Default idempotency TTL in seconds (24 hours)
IDEMPOTENCY_TTL_SECONDS=86400

# Default max retry delay in ms (24 hours)
MAX_RETRY_DELAY_MS=86400000

# Server port
PORT=3000

# ============================================================================
# Worker Configuration
# ============================================================================
# Orchestrator URL (for workers to register)
PIPEWEAVE_ORCHESTRATOR_URL=http://localhost:3000

# Worker port
WORKER_PORT=8080

# ============================================================================
# CLI Configuration
# ============================================================================
# Default orchestrator URL for CLI commands
# PIPEWEAVE_ORCHESTRATOR_URL=http://localhost:3000

# API token (if authentication is enabled)
# PIPEWEAVE_API_TOKEN=your-api-token

# ============================================================================
# Development
# ============================================================================
NODE_ENV=development
LOG_LEVEL=debug