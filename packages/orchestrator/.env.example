# ============================================================================
# Database Configuration
# ============================================================================

# Option 1: Connection string (preferred)
DATABASE_URL=postgres://user:password@localhost:5432/pipeweave

# Option 2: Individual credentials
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=pipeweave
# DB_USER=pipeweave
# DB_PASSWORD=pipeweave
# DB_SSL=false
# DB_POOL_MAX=10

# ============================================================================
# Storage Backend Configuration
# ============================================================================

# Multi-backend configuration (JSON array)
STORAGE_BACKENDS='[{"id":"primary","provider":"local","endpoint":"file://","bucket":"data","credentials":{"basePath":"./storage"},"isDefault":true}]'
DEFAULT_STORAGE_BACKEND_ID=primary

# Example: MinIO (S3-compatible)
# STORAGE_BACKENDS='[{"id":"minio","provider":"minio","endpoint":"http://localhost:9000","bucket":"pipeweave","credentials":{"accessKey":"minioadmin","secretKey":"minioadmin"},"isDefault":true}]'

# Example: AWS S3
# STORAGE_BACKENDS='[{"id":"aws-primary","provider":"aws-s3","endpoint":"https://s3.amazonaws.com","bucket":"pipeweave-prod","region":"us-east-1","credentials":{"accessKey":"AKIA...","secretKey":"..."},"isDefault":true}]'

# Example: Google Cloud Storage
# STORAGE_BACKENDS='[{"id":"gcs-primary","provider":"gcs","endpoint":"https://storage.googleapis.com","bucket":"pipeweave-prod","credentials":{"projectId":"my-project","clientEmail":"service-account@my-project.iam.gserviceaccount.com","privateKey":"-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"},"isDefault":true}]'

# Example: Multi-backend setup (Local + GCS backup)
# STORAGE_BACKENDS='[{"id":"local","provider":"local","endpoint":"file://","bucket":"data","credentials":{"basePath":"./storage"},"isDefault":true},{"id":"backup","provider":"gcs","endpoint":"https://storage.googleapis.com","bucket":"pipeweave-backup","credentials":{"projectId":"my-project","clientEmail":"...","privateKey":"..."}}]'
# DEFAULT_STORAGE_BACKEND_ID=local

# ============================================================================
# Security
# ============================================================================

# Shared secret key for JWT encryption (32-byte hex)
# Generate with: openssl rand -hex 32
PIPEWEAVE_SECRET_KEY=dev-secret-key-32-bytes-long!!

# ============================================================================
# Orchestrator Configuration
# ============================================================================

# Execution mode: standalone or serverless
MODE=standalone

# Maximum concurrent task executions
MAX_CONCURRENCY=10

# Task polling interval in ms (standalone mode only)
POLL_INTERVAL_MS=1000

# Server port
PORT=3000

# ============================================================================
# Maintenance & Reliability
# ============================================================================

# Maintenance mode check interval in ms
MAINTENANCE_CHECK_INTERVAL_MS=5000

# Dead Letter Queue retention in days
DLQ_RETENTION_DAYS=30

# Default idempotency cache TTL in seconds
IDEMPOTENCY_TTL_SECONDS=86400

# Default max retry delay in ms (24 hours)
MAX_RETRY_DELAY_MS=86400000

# ============================================================================
# Development
# ============================================================================

NODE_ENV=development
